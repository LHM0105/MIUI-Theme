<?xml version="1.0" encoding="utf-8"?>
<Statusbar version="1" frameRate="0" resDensity="480" scaleByDensity="true" extraResources="sw1440-den640::1.222" extraScaleByDensity="640:1.222">
    <VariableBinders>
        <BroadcastBinder action="lockscreen.action.PREFERENCE_CHANGED">
            <Trigger>
                <MethodCommand target="music_control" method="initByPreference" />
            </Trigger>
        </BroadcastBinder>
    </VariableBinders>

    <MusicControl name="music_control" x="0" y="0" autoShow="true" enableProgress="true" frameRate="0">
        <Var name="progress" expression="ifelse(#music_control.music_state,ifelse(#music_control.music_duration,#music_control.music_position/#music_control.music_duration,0),#progress)" />
        <Var name="show_no_title" expression="strIsEmpty(@music_control.title)" />
        <Var name="is_miui_player" expression="or(eqs(@music_control.package,'com.miui.player'), strIsEmpty(@music_control.package), #show_no_title)" />

        <!--手机纵向-->
        <Group visibility="le(#mode,1)*not(#is_tablet)">
            <Text name="music_title_port" x="55" y="#view_height-278" size="40" color="#b3ffffff" alignV="bottom" enableFontScale="true" text="@no_title" visibility="#show_no_title"/>
            <Text x="55" y="#view_height-278+#music_title_port.text_height+10" size="30" color="#4dffffff" alignV="bottom" enableFontScale="true" text="@no_artist" visibility="#show_no_title"/>
            <Text x="55" y="#view_height-278" w="#view_width-107" size="40" color="#b3ffffff" alignV="bottom" enableFontScale="true" format="%s" paras="@music_control.title" visibility="not(#show_no_title)"/>
            <Text x="55" y="#view_height-278+#music_title_port.text_height+10" w="#view_width-107" size="30" color="#4dffffff" alignV="bottom" enableFontScale="true" format="%s" paras="@music_control.artist" visibility="not(#show_no_title)"/>

            <Button x="368" y="#view_height-188" w="150*not(#music_control.disable_next)" h="150" alpha="255-191*#music_control.disable_next" visibility="not(#show_no_title)"  alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_next'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_next'" paramTypes="String" />
                        <ExternCommand command="track_music_next" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="20" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="20" y="130" alignV="bottom" />
                </Pressed>
                <Image src="music_next.png" x="66" y="96" alpha="204" alignV="bottom" />
            </Button>

            <Button x="32" y="#view_height-188" w="150*not(#music_control.disable_prev)" h="150" alpha="255-191*#music_control.disable_prev" visibility="not(#show_no_title)" alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_prev'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_prev'" paramTypes="String" />
                        <ExternCommand command="track_music_prev" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="20" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="20" y="130" alignV="bottom" />
                </Pressed>
                <Image src="music_prev.png" x="59" y="96" alpha="204" alignV="bottom" />
            </Button>

            <Button x="200" y="#view_height-188" w="150*not(#music_control.disable_play)" h="150" alpha="255-191*#music_control.disable_play" visibility="not(#music_control.music_state)*not(#show_no_title)" alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_play'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_play'" paramTypes="String" />
                        <ExternCommand command="track_music_play" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="20" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="20" y="130" alignV="bottom" /> 
                </Pressed>
                <Image src="music_play.png" x="63" y="96" alignV="bottom" loadSync="true"/>
            </Button>

            <Button x="200" y="#view_height-188" w="150*not(#music_control.disable_play)" h="150" alpha="255-191*#music_control.disable_play" visibility="#music_control.music_state*not(#show_no_title)" alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_pause'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_pause'" paramTypes="String" />
                        <ExternCommand command="track_music_pause" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="20" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="20" y="130" alignV="bottom" /> 
                </Pressed>
                <Image src="music_pause.png" x="59" y="95" alignV="bottom" />
            </Button>

            <Group x="275" y="#view_height-113.4" w="120" h="120" align="center" alignV="center" layered="true" visibility="not(#show_no_title)">
                <Image x="60" y="60" align="center" alignV="center" src="play_progress.png" />
                <Arc x="60" y="60" w="120" h="120" startAngle="-90" sweep="-360*(1-#progress)" close="true" fillColor="#ff000000" xfermode="clear"/>
            </Group>

            <Button x="0" y="0" w="#view_width" h="#view_height-188">
                <Triggers>
                    <Trigger action="up" condition="#is_miui_player">
                        <ExternCommand command="track_music_enter" strPara="@music_control.package"/>
                        <IntentCommand action="com.miui.player.PLAYBACK_VIEWER" category="android.intent.category.DEFAULT" condition="not(#show_no_title)">
                            <Extra name="intent_sender" type="string" expression="'notification_bar'"/>
                        </IntentCommand>
                        <IntentCommand action="android.intent.action.MAIN" category="android.intent.category.LAUNCHER" package="com.miui.player" class="com.miui.player.ui.MusicBrowserActivity" condition="#show_no_title">
                            <Extra name="intent_sender" type="string" expression="'notification_bar'"/>
                        </IntentCommand>
                        <ExternCommand command="statusbar_collapse_and_unlock"/>
                    </Trigger>
                    <!--
                    <Trigger action="up" condition="not(#is_miui_player)">
                        <IntentCommand package="@music_control.package" class="@music_control.class"/>
                        <ExternCommand command="statusbar_collapse_and_unlock"/>
                    </Trigger>
                    -->
                </Triggers>
            </Button>
            <Button x="518" y="#view_height-188" w="#view_width-518" h="188">
                <Triggers>
                    <Trigger action="up" condition="#is_miui_player">
                        <ExternCommand command="track_music_enter" strPara="@music_control.package"/>
                        <IntentCommand action="com.miui.player.PLAYBACK_VIEWER" category="android.intent.category.DEFAULT" condition="not(#show_no_title)">
                            <Extra name="intent_sender" type="string" expression="'notification_bar'"/>
                        </IntentCommand>
                        <IntentCommand action="android.intent.action.MAIN" category="android.intent.category.LAUNCHER" package="com.miui.player" class="com.miui.player.ui.MusicBrowserActivity" condition="#show_no_title">
                            <Extra name="intent_sender" type="string" expression="'notification_bar'"/>
                        </IntentCommand>
                        <ExternCommand command="statusbar_collapse_and_unlock"/>
                    </Trigger>
                    <!--
                    <Trigger action="up" condition="not(#is_miui_player)">
                        <IntentCommand package="@music_control.package" class="@music_control.class"/>
                        <ExternCommand command="statusbar_collapse_and_unlock"/>
                    </Trigger>
                    -->
                </Triggers>
            </Button>
            <Image src="button_n.png" x="388" y="#view_height-58" alpha="64" alignV="bottom" visibility="#show_no_title" />
            <Image src="music_next.png" x="434" y="#view_height-92" alpha="64" alignV="bottom" visibility="#show_no_title" />
            <Image src="button_n.png" x="220" y="#view_height-58" alpha="64" alignV="bottom" visibility="#show_no_title" />
            <Image src="music_play.png" x="263" y="#view_height-93" alpha="64" alignV="bottom" visibility="#show_no_title" />
            <Image src="button_n.png" x="52" y="#view_height-58" alpha="64" alignV="bottom" visibility="#show_no_title" />
            <Image src="music_prev.png" x="91" y="#view_height-93" alpha="64" alignV="bottom" visibility="#show_no_title" />
        </Group>

        <!--横向戓者平板-->
        <Group visibility="ge(#mode,2)+#is_tablet">
            <Text name="music_title_land" x="0" y="#view_height-93-ifelse(#is_tablet,55,0)" size="40+ifelse(#is_tablet,24,0)" color="#b3ffffff" alignV="bottom" enableFontScale="true" text="@no_title" visibility="#show_no_title"/>
            <Text x="0" y="#view_height-93-ifelse(#is_tablet,43,0)+#music_title_land.text_height+10" size="30+ifelse(#is_tablet,12,0)" color="#4dffffff" alignV="bottom" enableFontScale="true" text="@no_artist" visibility="#show_no_title"/>    
            <Text x="0" y="#view_height-93-ifelse(#is_tablet,55,0)" w="#view_width-466" size="40+ifelse(#is_tablet,24,0)" color="#b3ffffff" alignV="bottom" enableFontScale="true" format="%s" paras="@music_control.title" visibility="not(#show_no_title)"/>
            <Text x="0" y="#view_height-93-ifelse(#is_tablet,43,0)+#music_title_land.text_height+10" w="#view_width-466" size="30+ifelse(#is_tablet,12,0)" color="#4dffffff" alignV="bottom" enableFontScale="true" format="%s" paras="@music_control.artist" visibility="not(#show_no_title)"/>

            <Button x="#view_width-130" y="#view_height-168-ifelse(#is_tablet,43,0)" w="150*not(#music_control.disable_next)" h="150" alpha="255-191*#music_control.disable_next" visibility="not(#show_no_title)" alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_next'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_next'" paramTypes="String" />
                        <ExternCommand command="track_music_next" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="20" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="20" y="130" alignV="bottom" /> 
                </Pressed>
                <Image src="music_next.png" x="66" y="96" alpha="204" alignV="bottom" />
            </Button>

            <Button x="#view_width-466" y="#view_height-168-ifelse(#is_tablet,43,0)" w="150*not(#music_control.disable_prev)" h="150" alpha="255-191*#music_control.disable_prev" visibility="not(#show_no_title)" alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_prev'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_prev'" paramTypes="String" />
                        <ExternCommand command="track_music_prev" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="20" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="20" y="130" alignV="bottom" /> 
                </Pressed>
                <Image src="music_prev.png" x="59" y="96" alpha="204" alignV="bottom" />
            </Button>

            <Button x="#view_width-296" y="#view_height-168-ifelse(#is_tablet,43,0)" w="150*not(#music_control.disable_play)" h="150" alpha="255-191*#music_control.disable_play" visibility="not(#music_control.music_state)*not(#show_no_title)" alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_play'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_play'" paramTypes="String" />
                        <ExternCommand command="track_music_play" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="18" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="18" y="130" alignV="bottom" /> 
                </Pressed>
                <Image src="music_play.png" x="61" y="96" alignV="bottom" />
            </Button>

            <Button x="#view_width-296" y="#view_height-168-ifelse(#is_tablet,43,0)" w="150*not(#music_control.disable_play)" h="150" alpha="255-191*#music_control.disable_play" visibility="#music_control.music_state*not(#show_no_title)" alignChildren="true">
                <Triggers>
                    <Trigger action="down">
                        <MethodCommand target="music_control" method="onButtonDown" params="'music_pause'" paramTypes="String" />
                    </Trigger>
                    <Trigger action="up">
                        <MethodCommand target="music_control" method="onButtonUp" params="'music_pause'" paramTypes="String" />
                        <ExternCommand command="track_music_pause" strPara="@music_control.package"/>
                    </Trigger>
                </Triggers>
                <Normal>
                    <Image src="button_n.png" x="18" y="130" alpha="76.5" alignV="bottom" />
                </Normal>
                <Pressed>
                    <Image src="button_p.png" x="18" y="130" alignV="bottom" /> 
                </Pressed>
                <Image src="music_pause.png" x="57" y="95" alignV="bottom" />
            </Button>

            <Group x="#view_width-223" y="#view_height-93-ifelse(#is_tablet,43,0)" w="120" h="120" align="center" alignV="center" layered="true" visibility="not(#show_no_title)">
                <Image x="60" y="60" align="center" alignV="center" src="play_progress.png" />
                <Arc x="60" y="60" w="120" h="120" startAngle="-90" sweep="-360*(1-#progress)" close="true" fillColor="#ff000000" xfermode="clear"/>
            </Group>

            <Button x="0" y="0" w="#view_width-446" h="#view_height">
                <Triggers>
                    <Trigger action="up" condition="#is_miui_player">
                        <ExternCommand command="track_music_enter" strPara="@music_control.package"/>
                        <IntentCommand action="com.miui.player.PLAYBACK_VIEWER" category="android.intent.category.DEFAULT" condition="not(#show_no_title)">
                            <Extra name="intent_sender" type="string" expression="'notification_bar'"/>
                        </IntentCommand>
                        <IntentCommand action="android.intent.action.MAIN" category="android.intent.category.LAUNCHER" package="com.miui.player" class="com.miui.player.ui.MusicBrowserActivity" condition="#show_no_title*not(#is_tablet)">
                            <Extra name="intent_sender" type="string" expression="'notification_bar'"/>
                        </IntentCommand>
                        <IntentCommand action="android.intent.action.MAIN" category="android.intent.category.LAUNCHER" package="com.miui.player" class="com.miui.player.pad.ui.MusicMainActivity" condition="#show_no_title*#is_tablet">
                            <Extra name="intent_sender" type="string" expression="'notification_bar'"/>
                        </IntentCommand>
                        <ExternCommand command="statusbar_collapse_and_unlock"/>
                    </Trigger>
                    <!--
                    <Trigger action="up" condition="not(#is_miui_player)">
                        <IntentCommand package="@music_control.package" class="@music_control.class"/>
                        <ExternCommand command="statusbar_collapse_and_unlock"/>
                    </Trigger>
                    -->
                </Triggers>
            </Button>
            <Image src="button_n.png" x="#view_width-110" y="#view_height-38-ifelse(#is_tablet,43,0)" alpha="64" alignV="bottom" visibility="#show_no_title"  />
            <Image src="music_next.png" x="#view_width-66" y="#view_height-72-ifelse(#is_tablet,43,0)" alpha="64" alignV="bottom" visibility="#show_no_title"  />
            <Image src="button_n.png" x="#view_width-278" y="#view_height-38-ifelse(#is_tablet,43,0)" alpha="64" alignV="bottom" visibility="#show_no_title"  />
            <Image src="music_play.png" x="#view_width-235" y="#view_height-72-ifelse(#is_tablet,43,0)" alpha="64" alignV="bottom" visibility="#show_no_title"  />
            <Image src="button_n.png" x="#view_width-446" y="#view_height-38-ifelse(#is_tablet,43,0)" alpha="64" alignV="bottom" visibility="#show_no_title"  />
            <Image src="music_prev.png" x="#view_width-407" y="#view_height-72-ifelse(#is_tablet,43,0)" alpha="64" alignV="bottom" visibility="#show_no_title"  />
        </Group>
    </MusicControl>
</Statusbar>
